
from cStringIO import StringIO


# This table lists information about ERS-1 cycles
#
# Each record lists the information for one repeat cycle:
# - Mission phase
# - Cycle number
# - First internal pass number
# - Last internal pass number
# - Start time in UTC YYMMDDHHMMSS.sss (with sss fraction of seconds)
# - Stop time in UTC YYMMDDHHMMSS.sss (with sss fraction of seconds)
# - Number of tracks available
# - Number of records for this cycle
#
HEADER="ph cyc pass0 pass1 starttime        endtime          #trx  #recs"

DATA="a 001 0061 0086 910801002504.644 910801212941.199   26   41083,\
a 002 0001 0086 910801213941.825 910804213052.169   84  144756,\
a 003 0001 0086 910804213942.262 910807213051.658   85  141021,\
a 004 0001 0063 910807213941.657 910810020301.531   58   97365,\
a 005 0057 0086 910812210116.122 910813213049.144   30   51395,\
a 006 0001 0086 910813213939.317 910816213050.353   84  139756,\
a 007 0001 0086 910816213939.645 910819213051.114   82  138891,\
a 008 0001 0086 910819213940.231 910822213049.939   85  146453,\
a 009 0001 0086 910822213938.700 910825213048.919   86  148886,\
a 010 0001 0057 910825213937.574 910827210527.230   54   92016,\
a 011 0057 0086 910830210459.600 910831213050.817   30   51937,\
a 012 0001 0086 910831213940.649 910903213049.979   84  136407,\
a 013 0001 0086 910903213939.493 910906213047.805   85  141235,\
a 014 0001 0086 910906213937.459 910909213048.524   78  132744,\
a 015 0001 0086 910909213938.476 910912213049.279   81  141763,\
a 016 0001 0086 910912213939.270 910915213049.476   72  120408,\
a 017 0001 0086 910915213939.272 910918212941.367   85  144776,\
a 018 0001 0086 910918213937.881 910921213046.699   85  145308,\
a 019 0001 0086 910921213936.193 910924213045.533   85  145895,\
a 020 0001 0086 910924213934.311 910927212938.680   84  144528,\
a 021 0001 0086 910927213935.250 910930212920.472   84  138456,\
a 022 0001 0086 910930213934.564 911003213044.552   86  149102,\
a 023 0001 0086 911003213935.108 911006213047.315   85  141641,\
a 024 0001 0086 911006213937.441 911009213048.531   86  144986,\
a 025 0001 0086 911009213938.311 911012212942.094   85  147840,\
a 026 0001 0086 911012213938.162 911015213048.504   86  145236,\
a 027 0001 0086 911015213937.609 911018213045.454   85  146693,\
a 028 0001 0086 911018213935.061 911021213041.861   86  146577,\
a 029 0001 0086 911021213931.498 911024212931.382   86  147541,\
a 030 0001 0086 911024213927.215 911027213039.843   83  142667,\
a 031 0001 0086 911027213928.181 911030212928.696   86  150226,\
a 032 0001 0086 911030213926.504 911102213039.142   85  146792,\
a 033 0001 0086 911102213928.491 911105212933.291   79  135163,\
a 034 0001 0086 911105213930.751 911108213040.523   86  150682,\
a 035 0001 0086 911108213930.130 911111212930.476   86  150369,\
a 036 0001 0086 911111213926.634 911114212811.046   85  148430,\
a 037 0001 0086 911114213925.368 911117212931.788   86  151484,\
a 038 0001 0086 911117213927.795 911120213040.477   85  148143,\
a 039 0001 0086 911120213928.787 911123213040.037   86  149043,\
a 040 0001 0086 911123213929.372 911126213039.110   86  152344,\
a 041 0001 0086 911126213928.328 911129213037.293   86  152016,\
a 042 0001 0086 911129213927.156 911202212929.076   85  147642,\
a 043 0001 0086 911202213924.147 911205212925.170   86  154040,\
a 044 0001 0086 911205213920.999 911208213030.042   85  150829,\
a 045 0001 0086 911208213920.017 911211213028.855   73  125173,\
a 046 0001 0086 911211213918.783 911214213057.466   78  129586,\
b 047 0001 0086 911214214059.882 911217213424.764   83  143489,\
b 048 0001 0086 911217214437.960 911220213635.924   82  141241,\
b 049 0001 0086 911220214646.803 911223213638.286   82  140850,\
b 050 0001 0086 911223214649.056 911226213639.322   82  139610,\
b 051 0001 0032 911226214732.592 911228001025.468   30   49329,\
b 053 0014 0086 920102084621.025 920104213645.576   73  131988,\
b 054 0001 0086 920104214700.994 920107213643.481   86  155720,\
b 055 0001 0086 920107214650.643 920110213640.414   74  135852,\
b 056 0001 0074 920110214705.858 920113105056.451   74  135890,\
b 057 0011 0086 920114060612.662 920116213645.268   76  135139,\
b 058 0001 0086 920116214658.065 920119213647.600   77  136066,\
b 059 0001 0086 920119214712.977 920122213649.795   86  161594,\
b 060 0001 0086 920122214717.608 920125213647.913   86  161500,\
b 061 0001 0086 920125214709.017 920128213646.903   86  161803,\
b 062 0001 0086 920128214708.011 920131213649.344   84  145744,\
b 063 0001 0086 920131214654.642 920203213646.114   75  138585,\
b 064 0001 0086 920203214654.128 920206213647.453   86  159092,\
b 065 0001 0086 920206214703.650 920209213647.018   86  163137,\
b 066 0001 0086 920209214709.555 920212213648.560   86  162395,\
b 067 0001 0086 920212214713.050 920215213649.177   74  140100,\
b 068 0001 0044 920215214658.031 920217095731.444   44   81657,\
b 069 0014 0086 920219085911.793 920221213647.692   73  138062,\
b 070 0001 0086 920221214654.725 920224213647.248   86  164102,\
b 071 0001 0086 920224214654.869 920227213645.290   86  164462,\
b 072 0001 0086 920227214654.780 920301213646.108   86  164429,\
b 073 0001 0086 920301214706.281 920304213647.321   86  162896,\
b 074 0001 0086 920304214655.933 920307213648.221   86  163546,\
b 075 0001 0086 920307214701.321 920310213649.939   85  158345,\
b 076 0001 0086 920310214710.075 920313213651.827   86  162443,\
b 077 0001 0086 920313214709.824 920316213648.484   86  163286,\
b 078 0001 0086 920316214715.937 920319213647.376   85  160556,\
b 079 0001 0086 920319214706.056 920322213649.309   86  158549,\
b 080 0001 0086 920322214711.255 920325213649.797   86  161184,\
b 081 0001 0001 920325214711.581 920325220833.953    1    1309,\
c 083 0499 1001 920414073317.937 920501204038.651  483  855000,\
c 084 0001 0969 920501220918.080 920604182331.265  919 1579528,\
c 085 0014 1002 920606091416.603 920710215933.011  924 1573051,\
c 086 0001 1002 920710220931.640 920814215842.412  825 1370016,\
c 087 0001 1001 920814220938.281 920918211405.601  908 1564097,\
c 088 0001 1002 920918220936.479 921023215922.147  968 1591717,\
c 089 0001 1002 921023220937.144 921127211415.983  976 1738891,\
c 090 0001 1001 921127220925.715 930101211000.891  976 1624416,\
c 091 0001 1000 930101220930.142 930205202148.757  991 1883144,\
c 092 0002 1001 930205230142.823 930312211351.485  986 1813972,\
c 093 0001 1002 930312220932.069 930416211420.499  947 1774334,\
c 094 0001 1002 930416220921.843 930521211412.665 1002 1726627,\
c 095 0001 1002 930521220938.031 930625211419.814  989 1754056,\
c 096 0001 1001 930625220928.392 930730211400.055  981 1664293,\
c 097 0001 1001 930730220938.650 930903211406.054  978 1740533,\
c 098 0001 1001 930903220933.924 931008211359.257  977 1698865,\
c 099 0001 1002 931008220935.240 931112211414.933  992 1785269,\
c 100 0001 1001 931112220924.082 931217210958.723  956 1621337,\
c 101 0001 0074 931217220922.215 931220112804.689   74  135716,\
d 103 0001 0086 931224220000.121 931227213650.693   86  153015,\
d 104 0001 0086 931227214659.715 931230213649.059   48    1832,\
d 105 0001 0086 931230221638.433 940102213650.430   86  153412,\
d 106 0001 0086 940102214658.880 940105213650.222   86  150012,\
d 107 0001 0086 940105214707.612 940108213655.782   86  155913,\
d 108 0001 0086 940108214658.869 940111213651.428   84  142293,\
d 109 0001 0086 940111214707.846 940114213657.192   86  159155,\
d 110 0001 0086 940114214658.884 940117213651.537   86  153050,\
d 111 0001 0086 940117214709.913 940120213652.199   86  160235,\
d 112 0001 0086 940120214659.715 940123213652.258   78  137914,\
d 113 0001 0086 940123214709.700 940126213651.953   85  157256,\
d 114 0001 0086 940126214659.301 940129205206.341   85  148372,\
d 115 0020 0086 940130134420.265 940201213650.301   66  121354,\
d 116 0001 0086 940201214659.285 940204213649.965   86  150044,\
d 117 0001 0086 940204214710.266 940207205204.174   85  150172,\
d 118 0002 0086 940207223229.813 940210213650.904   84  145835,\
d 119 0001 0086 940210214708.630 940213213653.545   86  155985,\
d 120 0001 0086 940213214658.487 940216213640.714   86  150300,\
d 121 0001 0086 940216214707.691 940219213649.668   86  155996,\
d 122 0001 0086 940219214657.454 940222213641.500   80  138102,\
d 123 0001 0086 940222214710.751 940225213652.894   86  155743,\
d 124 0001 0086 940225214659.192 940228213650.328   86  152132,\
d 125 0001 0086 940228214711.344 940303213654.028   86  156609,\
d 126 0001 0086 940303214718.607 940306213651.243   86  151950,\
d 127 0001 0086 940306214712.436 940309213654.459   86  156739,\
d 128 0001 0086 940309214657.879 940312213651.312   85  144635,\
d 129 0001 0086 940312214713.237 940315213653.588   86  158180,\
d 130 0001 0086 940315214713.128 940318205204.501   86  148260,\
d 131 0001 0086 940318223122.465 940321213654.601   86  154184,\
d 132 0001 0086 940321214704.046 940324213652.070   86  150602,\
d 133 0001 0086 940324214714.634 940327213651.017   86  156250,\
d 134 0001 0086 940327214717.127 940330213652.080   86  151334,\
d 135 0001 0086 940330214715.006 940402213655.031   86  153565,\
d 136 0001 0086 940402214700.970 940405213651.764   86  152481,\
d 137 0001 0086 940405214713.172 940408213650.970   84  144131,\
d 138 0001 0052 940408214709.537 940410162715.922   52   89820,\
e 139 3583 4822 940410172005.974 940523215944.949 1210 2081388,\
e 140 0001 3650 940523220959.203 940928015936.219 3534 5882898,\
f 141 4713 4822 940928020935.311 941001215935.548  107  179805,\
f 142 0001 4822 941001220949.122 950318215923.325 4669 8066990,\
f 143 0001 0067 950318220939.368 950321060149.130   67  119401,\
g 144 0521 1002 950324020347.760 950409215919.019  482  856898,\
g 145 0001 1002 950409220945.023 950514215922.339  984 1728163,\
g 146 0001 1001 950514220952.261 950618211125.465  962 1699493,\
g 147 0046 1002 950620120301.664 950723215928.967  939 1599028,\
g 148 0001 1002 950723220943.891 950827215917.253  979 1684825,\
g 149 0001 1002 950827220941.654 951001215611.420  969 1756513,\
g 150 0001 1002 951001225403.075 951105215926.558  976 1691646,\
g 151 0001 1002 951105220941.545 951210214135.202  989 1712667,\
g 152 0001 1002 951210220942.581 960114215923.046  981 1726639,\
g 153 0003 1002 960115000000.711 960218215927.271  989 1775909,\
g 154 0001 1002 960218220942.934 960324215920.079  991 1794014,\
g 155 0001 1002 960324220945.755 960428215925.087  973 1743525,\
g 156 0001 1002 960428221003.290 960602215926.619  989 1749755"

DURATIONS={'a':3, 'b':3, 'c':35, 'd':3, 'e':168, 'f':168, 'g':35}

from ersCycles import SatPhasesCycles

class Ers1PhasesCycles(SatPhasesCycles): 
        global HEADER,DATA
        #
        #
        #
        def __init__(self, label=None):
            SatPhasesCycles.__init__(self, label, HEADER, DATA)

            for key in DURATIONS.keys():
                print "set duration for phase:'%s'" % key
                phase=self.getPhase(key)
                phase.setDuration(DURATIONS[key])
                
            
if __name__ == '__main__':
    label="ERS1"
    print "%s cycles" % label
    ers = Ers1PhasesCycles(label)
    print "\n\ndump: %s" % ers.info()
    p,c = ers.getPhaseAndCycleFromTime("1994-08-20T10:00:32.000Z")
    print "in in phase:%s and cycle:%s. phase duration:%s" % (p,c, ers.getPhase(p).getDuration())
